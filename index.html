<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Dynamic Memory Book</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400&display=swap');

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: linear-gradient(135deg, #d4c4f7, #a0c4ff);
    font-family: 'Lato', sans-serif;
    overflow: hidden;
    touch-action: none;
  }

  .hint {
    font-weight: 300;
    font-size: 12px;
    color: rgba(255,255,255,0.75);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    margin-bottom: 14px;
    user-select: none;
  }

  .book-wrapper {
    position: relative;
    width: var(--bw);
    height: var(--bh);
  }

  .cover {
    position: absolute; width: 100%; height: 100%;
    background: linear-gradient(145deg, #5e60ce, #3f37c9);
    border-radius: 12px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.4), inset 0 0 30px rgba(255,255,255,0.15);
    z-index: -2;
  }

  .page-stack {
    position: absolute; right: -8px; top: 10px; width: 8px;
    height: calc(var(--bh) - 20px);
    background: linear-gradient(to right, #eaeaea, #cfcfcf);
    border-radius: 3px;
    box-shadow: inset 0 0 4px rgba(0,0,0,0.2);
    z-index: -1;
  }

  .book {
    width: calc(var(--bw) - 40px);
    height: calc(var(--bh) - 50px);
    position: absolute;
    top: 25px; left: 20px;
    perspective: 2500px;
  }

  .page {
    width: 100%; height: 100%;
    position: absolute; top: 0; left: 0;
    transform-origin: left center;
    transform-style: preserve-3d;
    transition: transform 1s ease;
    cursor: pointer;
  }

  .page::before {
    content: "";
    position: absolute; left: 0; top: 0; width: 20px; height: 100%;
    background: linear-gradient(to right, rgba(0,0,0,0.25), transparent);
    z-index: 5;
    pointer-events: none;
  }

  .page-content {
    position: absolute; width: 100%; height: 100%;
    backface-visibility: hidden;
    border-radius: 6px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    background: white;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .front { flex-direction: column; padding: 15px; text-align: center; }
  .back  { transform: rotateY(180deg); }

  .page img {
    max-width: 100%; max-height: 100%;
    object-fit: contain;
    border-radius: 6px;
    pointer-events: none;
  }

  .intro-wrapper {
    display: flex; flex-direction: column;
    align-items: center; justify-content: flex-start;
    height: 100%; padding: 15px;
  }

  .intro-text {
    font-family: 'Playfair Display', serif;
    font-style: italic;
    font-size: clamp(13px, 3vw, 20px);
    margin-bottom: 10px;
    color: #444;
  }

  .intro-image {
    max-width: 100%; max-height: calc(100% - 60px);
    object-fit: contain;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    margin-top: 10px;
    pointer-events: none;
  }

  .page-num {
    position: absolute;
    bottom: 8px; right: 14px;
    font-size: 11px;
    color: rgba(0,0,0,0.25);
    font-weight: 300;
    letter-spacing: 0.08em;
  }

  .end-message {
    position: absolute;
    width: 100%; height: 100%;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    background: linear-gradient(145deg, #5e60ce, #3f37c9);
    border-radius: 12px;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.8s ease;
    pointer-events: none;
    text-align: center;
    padding: 30px;
  }

  .end-message.visible { opacity: 1; pointer-events: auto; }

  .end-message-title {
    font-family: 'Playfair Display', serif;
    font-style: italic;
    font-size: clamp(18px, 5vw, 28px);
    color: white;
    margin-bottom: 16px;
    line-height: 1.3;
  }

  .end-message-sub {
    font-weight: 300;
    font-size: 13px;
    color: rgba(255,255,255,0.7);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    margin-bottom: 6px;
  }

  .arrow-btns {
    display: flex;
    gap: 16px;
    margin-top: 16px;
  }

  .arrow-btn {
    background: rgba(255,255,255,0.2);
    border: 1px solid rgba(255,255,255,0.4);
    color: white;
    font-size: 22px;
    width: 48px; height: 48px;
    border-radius: 50%;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: background 0.2s ease;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  .arrow-btn:hover, .arrow-btn:active { background: rgba(255,255,255,0.35); }
  .arrow-btn:disabled { opacity: 0.3; cursor: default; }

  .nav-btn {
    font-weight: 300;
    font-size: 12px;
    color: rgba(255,255,255,0.85);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    background: rgba(255,255,255,0.12);
    border: 1px solid rgba(255,255,255,0.35);
    border-radius: 30px;
    padding: 9px 22px;
    cursor: pointer;
    transition: background 0.3s ease;
    white-space: nowrap;
    -webkit-tap-highlight-color: transparent;
    font-family: 'Lato', sans-serif;
  }

  .nav-btn:hover, .nav-btn:active { background: rgba(255,255,255,0.25); }
  .nav-btn.hidden { opacity: 0; pointer-events: none; }

  #skipToEndBtn { margin-top: 14px; }
  #backToStartBtn { margin-top: 24px; }
</style>
</head>
<body>

<div class="hint">Tap arrows or swipe to turn pages</div>
<div class="book-wrapper">
  <div class="cover"></div>
  <div class="page-stack"></div>
  <div class="book" id="book"></div>
  <div class="end-message" id="endMessage">
    <div class="end-message-title">To many more chapters together ðŸ’›</div>
    <div class="end-message-sub">With love, always</div>
    <div class="end-message-sub">Deivid 2026</div>
    <button class="nav-btn" id="backToStartBtn">â†© Back to start</button>
  </div>
</div>
<div class="arrow-btns">
  <button class="arrow-btn" id="prevBtn" disabled>â€¹</button>
  <button class="arrow-btn" id="nextBtn">â€º</button>
</div>
<button class="nav-btn" id="skipToEndBtn">Skip to end â†ª</button>

<script>
// Responsive: scale book to fit screen with padding for buttons below
function resize() {
  const padV = 160; // space for hint + arrows + skip btn
  const padH = 32;
  const maxW = 440, maxH = 600;
  const ratio = maxW / maxH;
  let w = Math.min(window.innerWidth - padH, maxW);
  let h = w / ratio;
  if (h > window.innerHeight - padV) {
    h = window.innerHeight - padV;
    w = h * ratio;
  }
  document.documentElement.style.setProperty('--bw', w + 'px');
  document.documentElement.style.setProperty('--bh', h + 'px');
}
resize();
window.addEventListener('resize', resize);

const photos = [
  "Photos/photo1.JPG",
  "Photos/IMG_3400.JPG",
  "Photos/IMG_3452.JPG",
  "Photos/IMG_3546.JPG",
  "Photos/IMG_3584.JPG",
  "Photos/IMG_3679.JPG",
  "Photos/IMG_3747.JPG",
  "Photos/IMG_2834.jpg",
  "Photos/IMG_3031.jpg",
  "Photos/IMG_3092.jpg",
  "Photos/IMG_3375.jpg",
  "Photos/IMG_3445.jpg",
  "Photos/IMG_3556.jpg",
  "Photos/IMG_3636.jpg",
  "Photos/IMG_3642.jpg",
  "Photos/IMG_3644.jpg",
  "Photos/IMG_3834.jpg",
  "Photos/IMG_3837.jpg",
  "Photos/IMG_3880.jpg",
  "Photos/IMG_3918.jpg",
  "Photos/IMG_3987.jpg",
  "Photos/IMG_3999.jpg",
  "Photos/IMG_4022.jpg",
  "Photos/IMG_0033.jpg",
  "Photos/IMG_0206.jpg",
  "Photos/IMG_0517.jpg",
  "Photos/IMG_0693.jpg",
  "Photos/IMG_0813.jpg",
  "Photos/IMG_1081.jpg",
  "Photos/IMG_1152.jpg",
  "Photos/IMG_1161.jpg",
  "Photos/IMG_1227.jpg",
  "Photos/IMG_1587.jpg",
  "Photos/IMG_1712.jpg",
  "Photos/IMG_1716.jpg",
  "Photos/IMG_1861.jpg",
  "Photos/IMG_2015.jpg",
  "Photos/IMG_2036.jpg",
  "Photos/IMG_2122.jpg",
  "Photos/IMG_2203.jpg",
  "Photos/IMG_2278.jpg",
  "Photos/IMG_2514.jpg",
  "Photos/IMG_2614.jpg",
  "Photos/IMG_2668.jpg",
  "Photos/IMG_2801.jpg",
  "Photos/IMG_3692.jpg"
];

const book       = document.getElementById('book');
const endMessage = document.getElementById('endMessage');
const skipBtn    = document.getElementById('skipToEndBtn');
const backBtn    = document.getElementById('backToStartBtn');
const prevBtn    = document.getElementById('prevBtn');
const nextBtn    = document.getElementById('nextBtn');

const pageCount = Math.ceil(photos.length / 2);

for (let i = 0; i < pageCount; i++) {
  const frontPhoto = photos[i * 2];
  const backPhoto  = photos[i * 2 + 1] || null;

  const page = document.createElement('div');
  page.className = 'page';

  const front = document.createElement('div');
  front.className = 'page-content front';

  if (i === 0) {
    const wrapper = document.createElement('div');
    wrapper.className = 'intro-wrapper';
    const text = document.createElement('div');
    text.className = 'intro-text';
    text.innerText = 'The beginning of No End ðŸ’›';
    const img = document.createElement('img');
    img.src = frontPhoto;
    img.className = 'intro-image';
    wrapper.appendChild(text);
    wrapper.appendChild(img);
    front.appendChild(wrapper);
  } else {
    const img = document.createElement('img');
    img.src = frontPhoto;
    front.appendChild(img);
  }

  const pn = document.createElement('div');
  pn.className = 'page-num';
  pn.textContent = i * 2 + 1;
  front.appendChild(pn);

  const back = document.createElement('div');
  back.className = 'page-content back';
  if (backPhoto) {
    const backImg = document.createElement('img');
    backImg.src = backPhoto;
    back.appendChild(backImg);
    const pn2 = document.createElement('div');
    pn2.className = 'page-num';
    pn2.textContent = i * 2 + 2;
    back.appendChild(pn2);
  }

  page.appendChild(front);
  page.appendChild(back);
  book.appendChild(page);
}

const pages = document.querySelectorAll('.page');
let currentPage = 0;
const totalPages = pages.length;
let animating = false;

pages.forEach((page, i) => page.style.zIndex = totalPages - i);

function updateButtons() {
  prevBtn.disabled = currentPage === 0;
  nextBtn.disabled = currentPage === totalPages;
}
updateButtons();

function flipForward() {
  if (animating || currentPage >= totalPages) return;
  animating = true;
  const page = pages[currentPage];
  page.style.zIndex = totalPages + 1;
  page.style.transform = 'rotateY(-180deg)';
  setTimeout(() => { page.style.zIndex = currentPage; animating = false; }, 1000);
  currentPage++;
  updateButtons();
  if (currentPage === totalPages) {
    skipBtn.classList.add('hidden');
    setTimeout(() => endMessage.classList.add('visible'), 800);
  }
}

function flipBackward() {
  if (animating || currentPage === 0) return;
  animating = true;
  endMessage.classList.remove('visible');
  const page = pages[currentPage - 1];
  page.style.zIndex = totalPages + 1;
  page.style.transform = 'rotateY(0deg)';
  setTimeout(() => { page.style.zIndex = totalPages - (currentPage - 1); animating = false; }, 1000);
  currentPage--;
  updateButtons();
  if (currentPage === 0) skipBtn.classList.remove('hidden');
}

nextBtn.addEventListener('click', flipForward);
prevBtn.addEventListener('click', flipBackward);

pages.forEach((page, index) => {
  page.addEventListener('click', () => {
    if (index === currentPage) flipForward();
    else if (index === currentPage - 1) flipBackward();
  });
});

// Swipe
let touchStartX = 0;
book.addEventListener('touchstart', e => { touchStartX = e.touches[0].clientX; }, { passive: true });
book.addEventListener('touchend', e => {
  const dx = e.changedTouches[0].clientX - touchStartX;
  if (Math.abs(dx) > 40) { if (dx < 0) flipForward(); else flipBackward(); }
}, { passive: true });

skipBtn.addEventListener('click', () => {
  pages.forEach((page, i) => {
    page.style.transition = 'none';
    page.style.transform = 'rotateY(-180deg)';
    page.style.zIndex = i;
  });
  requestAnimationFrame(() => requestAnimationFrame(() => {
    pages.forEach(page => page.style.transition = 'transform 1s ease');
  }));
  currentPage = totalPages;
  skipBtn.classList.add('hidden');
  updateButtons();
  setTimeout(() => endMessage.classList.add('visible'), 100);
});

backBtn.addEventListener('click', () => {
  endMessage.classList.remove('visible');
  pages.forEach((page, i) => {
    page.style.transition = 'none';
    page.style.transform = 'rotateY(0deg)';
    page.style.zIndex = totalPages - i;
  });
  requestAnimationFrame(() => requestAnimationFrame(() => {
    pages.forEach(page => page.style.transition = 'transform 1s ease');
  }));
  currentPage = 0;
  skipBtn.classList.remove('hidden');
  updateButtons();
});
</script>
</body>
</html>